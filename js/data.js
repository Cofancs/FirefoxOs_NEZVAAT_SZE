
var poem1 ={
    id:parseInt(1),
    title : "A walesi bárdok",
    author:"Arany János",
    content:"Edward király, angol király" +
                "Léptet fakó lován:\n" +
                "Hadd látom, úgymond, mennyit ér\n" +
                "A velszi tartomány.\n" +
                "\n" +
                "Van-e ott folyó és földje jó?\n" +
                "Legelőin fű kövér?\n" +
                "Használt-e a megöntözés:\n" +
                "A pártos honfivér?\n" +
                "\n" +
                "S a nép, az istenadta nép,\n" +
                "Ha oly boldog-e rajt’\n" +
                "Mint akarom, s mint a barom,\n" +
                "Melyet igába hajt?\n" +
                "\n" +
                "Felség! valóban koronád\n" +
                "Legszebb gyémántja Velsz:\n" +
                "Földet, folyót, legelni jót,\n" +
                "Hegy-völgyet benne lelsz.\n" +
                "\n" +
                "S a nép, az istenadta nép\n" +
                "Oly boldog rajta, Sire!\n" +
                " Kunyhói mind hallgatva, mint\n" +
                "Megannyi puszta sir.\n" +
                "\n" +
                "Edward király, angol király\n" +
                "Léptet fakó lován:\n" +
                "Körötte csend amerre ment,\n" +
                "És néma tartomány.\n" +
                "\n" +
                "Montgomery a vár neve,\n" +
                "Hol aznap este szállt;\n" +
                "Montgomery, a vár ura,\n" +
                "Vendégli a királyt.\n" +
                "\n" +
                "Vadat és halat, s mi jó falat\n" +
                "Szem-szájnak ingere,\n" +
                "Sürgő csoport, száz szolga hord,\n" +
                "Hogy nézni is tereh;\n" +
                "\n" +
                "S mind, amiket e szép sziget\n" +
                "Ételt-italt terem;\n" +
                "S mind, ami bor pezsegve forr\n" +
                "Túl messzi tengeren.\n" +
                "\n" +
                "Ti urak, ti urak! hát senkisem\n" +
                "Koccint értem pohárt?\n" +
                "Ti urak, ti urak!... ti velsz ebek!\n" +
                "Ne éljen Eduárd?\n" +
                "\n" +
                "Vadat és halat, s mi az ég alatt\n" +
                "Szem-szájnak kellemes,\n" +
                "Azt látok én: de ördög itt\n" +
                "Belül minden nemes.\n" +
                "\n" +
                "Ti urak, ti urak, hitvány ebek!\n" +
                "Ne éljen Eduárd?\n" +
                "Hol van, ki zengje tetteim -\n" +
                "Elő egy velszi bárd!\n" +
                "\n" +
                "Egymásra néz a sok vitéz,\n" +
                "A vendég velsz urak;\n" +
                "Orcáikon, mint félelem,\n" +
                "Sápadt el a harag.\n" +
                "\n" +
                "Szó bennszakad, hang fennakad,\n" +
                "Lehellet megszegik. -\n" +
                "Ajtó megől fehér galamb,\n" +
                "Ősz bárd emelkedik.\n" +
                "\n" +
                "Itt van, király, ki tetteidet\n" +
                "Elzengi, mond az agg;\n" +
                "S fegyver csörög, haló hörög\n" +
                "Amint húrjába csap.\n" +
                "\n" +
                "Fegyver csörög, haló hörög,\n" +
                "A nap vértóba száll,\n" +
                "Vérszagra gyűl az éji vad:\n" +
                "Te tetted ezt, király!\n" +
                "\n" +
                "Levágva népünk ezrei,\n" +
                "Halomba, mint kereszt,\n" +
                "Hogy sírva tallóz aki él:\n" +
                "Király, te tetted ezt!”\n" +
                "\n" +
                "Máglyára! el! igen kemény -\n" +
                "Parancsol Eduárd -\n" +
                "Ha! lágyabb ének kell nekünk;\n" +
                "S belép egy ifju bárd.\n" +
                "\n" +
                "Ah! lágyan kél az esti szél\n" +
                "Milford-öböl felé;\n" +
                "Szüzek siralma, özvegyek\n" +
                "Panasza nyög belé.\n" +
                "\n" +
                "Ne szülj rabot, te szűz! anya\n" +
                "Ne szoptass csecsemőt!...”\n" +
                "S int a király. S elérte még\n" +
                "A máglyára menőt.\n" +
                "\n" +
                "De vakmerőn s hivatlanúl\n" +
                "Előáll harmadik;\n" +
                "Kobzán a dal magára vall,\n" +
                "Ez íge hallatik:\n" +
                "\n" +
                "Elhullt csatában a derék -\n" +
                "No halld meg, Eduárd:\n" +
                "Neved ki diccsel ejtené,\n" +
                "Nem él oly velszi bárd.\n" +
                "\n" +
                "Emléke sír a lanton még -\n" +
                "No halld meg, Eduárd:\n" +
                "Átok fejedre minden dal,\n" +
                "Melyet zeng velszi bárd.”\n" +
                "\n" +
                "Meglátom én! - S parancsot ád\n" +
                "Király rettenetest:\n" +
                "Máglyára, ki ellenszegűl,\n" +
                "Minden velsz énekest!\n" +
                "\n" +
                "Szolgái szét száguldanak,\n" +
                "Ország-szerin, tova.\n" +
                "Montgomeryben így esett\n" +
                "A híres lakoma. -\n" +
                "\n" +
                "S Edvárd király, angol király\n" +
                "Vágtat fakó lován;\n" +
                "Körötte ég földszint az ég:\n" +
                "A velszi tartomány.\n" +
                "\n" +
                "Ötszáz, bizony, dalolva ment\n" +
                "Lángsírba velszi bárd:\n" +
                "De egy se birta mondani\n" +
                "Hogy: éljen Eduárd. -\n" +
                "\n" +
                "Ha, ha! mi zúg?... mi éji dal\n" +
                "London utcáin ez?\n" +
                "Felköttetem a lord-majort,\n" +
                "Ha bosszant bármi nesz!\n" +
                "\n" +
                "Áll néma csend; légy szárnya bent,\n" +
                "Se künn, nem hallatik:\n" +
                "Fejére szól, ki szót emel!\n" +
                "Király nem alhatik.”\n" +
                "\n" +
                "Ha, ha! elő síp, dob, zene!\n" +
                "Harsogjon harsona:\n" +
                "Fülembe zúgja átkait\n" +
                "A velszi lakoma...\n" +
                "\n" +
                "De túl zenén, túl síp-dobon,\n" +
                "Riadó kürtön át:\n" +
                "Ötszáz énekli hangosan\n" +
                "A vértanúk dalát.",
    youtube_url: "https://www.youtube.com/watch?v=8Btn0MAqfW0"
};
var poem2={
    id:parseInt(2),
    title : "Anyám tyúkja",
    author:"Petőfi Sándor",
    content: "Ej mi a kő! tyúkanyó, kend\n"+
                "A szobában lakik itt bent?\n"+
                "Lám, csak jó az isten, jót ád,\n"+
                "Hogy fölvitte a kend dolgát!\n"+
                "\n"+
                "Itt szaladgál föl és alá,\n"+
                "Még a ládára is fölszáll,\n"+
                "Eszébe jut, kotkodákol,\n"+
                "S nem verik ki a szobábol.\n"+
                "\n"+
                "Dehogy verik, dehogy verik!\n"+
                "Mint a galambot etetik,\n"+
                "Válogat a kendermagban,\n"+
                "A kiskirály sem él jobban.\n"+
                "\n"+
                "Ezért aztán, tyúkanyó, hát\n"+
                "Jól megbecsűlje kend magát,\n"+
                "Iparkodjék, ne legyen ám\n"+
                "Tojás szűkében az anyám. –\n"+
                "\n"+
                "Morzsa kutyánk, hegyezd füled,\n"+
                "Hadd beszélek mostan veled,\n"+
                "Régi cseléd vagy a háznál,\n"+
                "Mindig emberűl szolgáltál,\n"+
                "\n"+
                "Ezután is jó légy, Morzsa,\n"+
                "Kedvet ne kapj a tyúkhusra,\n"+
                "Élj a tyúkkal barátságba’...\n"+
                "Anyám egyetlen jószága.",
    youtube_url:"https://www.youtube.com/watch?v=FxOZvSlIT3M"
};

var poem3={
    id:parseInt(3),
    title : "Tiszai Csönd",
    author:"Juhász Gyula",
    content:"Hálót fon az est, a nagy, barna pók,\n"+
                "Nem mozdulnak a tiszai hajók.\n"+
                "\n"+
                "Egyiken távol harmonika szól,\n"+
                "Tücsök felel rá csöndben valahol.\n"+
                "\n"+
                "Az égi rónán ballag már a hold:\n"+
                "Ezüstösek a tiszai hajók.\n"+
                "\n"+
                "Tüzeket raknak az égi tanyák,\n"+
                "Hallgatják halkan a harmonikát.\n"+
                "\n"+
                "Magam a parton egymagam vagyok,\n"+
                "Tiszai hajók, néma társatok!\n"+
                "\n"+
                "Ma nem üzennek hívó távolok,\n"+
                "Ma kikötöttünk itthon, álmodók!",
    youtube_url:"https://www.youtube.com/watch?v=FxOZvSlIT3M"
};
var Poems ={
  index: window.localStorage.getItem("Poems:index"),
  $table : document.getElementById("poems-table"),
  
  
  init: function(){
      
      //initalize the storage index
      if(!Poems.index){
          window.localStorage.setItem("Poems:index",Poems.index=1);
      }
      
      //initialize the table
      if(window.localStorage.length -1){
          var poems_list = [],i,key;
          for(i=0;i<window.localStorage.length;i++){
              key = window.localStorage.key(i);
              if(/Poems:\d+/.test(key)){
                  poems_list.push(JSON.parse(window.localeStorage.getItem(key)));
              }
          }
          if(poems_list.length){
              poems_list.sort(function(a,b){return a.id<b.id?-1:(a.id>b.id?1:0);}).forEach(Poems.tableAdd);
              
          }
      }
      Poems.$table.addEventListener("click", function(event) {
					var op = event.target.getAttribute("data-op");
					if (/nDrawing|nRecording/.test(op)) {
						var entry = JSON.parse(window.localStorage.getItem("Poems:"+ event.target.getAttribute("data-id")));
						if (op == "nDrawing") {
							window.location.href='newDrawing.html';
						}
						else if (op == "nRecording") {
							window.location.href='newRecording.html';
						}
						event.preventDefault();
					}
				}, true);
  },
  
   storeAdd: function(entry) {
        entry.id = Poems.index;
         window.localStorage.setItem("Poems:index", ++Poems.index);
         window.localStorage.setItem("Poems:"+ entry.id, JSON.stringify(entry));
       
    },
  tableAdd : function(entry){
      var $tr = document.createElement("tr"),$td,key;
      for(key in entry){
          if(entry.hasOwnProperty(key)){
              $td = document.createElement("td");
              $td.appendChild(document.createTextNode(entry[key]));
              $tr.appendChild($td);
          }
      }
      $td= document.createElement("td");
      $td.innerHTML = '<a data-op="nDrawing" data-id="'+ entry.id +'">New Drawing</a> | <a data-op="nRecording" data-id="'+entry.id+'">New Recording</a>';
      $tr.appendChild($td);
      $tr.setAttribute("id","entry-"+ entry.id);
      Poems.$table.appendChild($tr);
  },
  tableEdit: function(entry){},
  tableRemove: function(entry){}
  
};
Poems.init();
Poems.storeAdd(poem1);
Poems.tableAdd(poem1);
Poems.storeAdd(poem2);
Poems.tableAdd(poem2);
Poems.storeAdd(poem3);
Poems.tableAdd(poem3);
